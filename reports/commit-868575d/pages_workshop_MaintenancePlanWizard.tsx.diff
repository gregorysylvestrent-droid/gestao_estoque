diff --git a/pages/workshop/MaintenancePlanWizard.tsx b/pages/workshop/MaintenancePlanWizard.tsx
index 106494c..237720e 100644
--- a/pages/workshop/MaintenancePlanWizard.tsx
+++ b/pages/workshop/MaintenancePlanWizard.tsx
@@ -1,10 +1,11 @@
-import React, { useState } from 'react';
-import { MaintenancePlan, MaintenanceTrigger, MaintenancePart, ChecklistSection } from '../../types';
+﻿﻿import React, { useMemo, useState } from 'react';
+import { MaintenancePlan, MaintenanceTrigger, MaintenancePart, ChecklistSection, InventoryItem } from '../../types';
 
 interface MaintenancePlanWizardProps {
   onSave: (plan: Omit<MaintenancePlan, 'id' | 'createdAt' | 'updatedAt'>) => void;
   onCancel: () => void;
   availableVehicles: { model: string; type: string }[];
+  inventory: InventoryItem[];
 }
 
 type WizardStep = 1 | 2 | 3 | 4;
@@ -12,7 +13,8 @@ type WizardStep = 1 | 2 | 3 | 4;
 export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
   onSave,
   onCancel,
-  availableVehicles
+  availableVehicles,
+  inventory
 }) => {
   const [currentStep, setCurrentStep] = useState<WizardStep>(1);
   const [planData, setPlanData] = useState<Partial<MaintenancePlan>>({
@@ -57,13 +59,44 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
   };
 
   const handleSave = () => {
-    if (planData.name && planData.vehicleType) {
-      onSave(planData as Omit<MaintenancePlan, 'id' | 'createdAt' | 'updatedAt'>);
-    }
+    const hasName = Boolean(String(planData.name || '').trim());
+    const hasVehicleContext = Boolean(String(planData.vehicleType || planData.vehicleModel || '').trim());
+    if (!hasName || !hasVehicleContext) return;
+
+    onSave({
+      ...planData,
+      vehicleType: String(planData.vehicleType || 'GERAL'),
+    } as Omit<MaintenancePlan, 'id' | 'createdAt' | 'updatedAt'>);
   };
 
+  const [selectedInventoryItem, setSelectedInventoryItem] = useState<InventoryItem | null>(null);
+  const [searchTerm, setSearchTerm] = useState('');
+  
+  const filteredInventory = useMemo(() => {
+    if (!searchTerm) return [];
+    return inventory.filter(item => 
+      item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
+      item.sku.toLowerCase().includes(searchTerm.toLowerCase())
+    );
+  }, [searchTerm, inventory]);
+
   const addPart = () => {
-    if (newPart.name && newPart.sku) {
+    if (selectedInventoryItem) {
+      setPlanData(prev => ({
+        ...prev,
+        parts: [...(prev.parts || []), { 
+          id: `PART-${Date.now()}`,
+          sku: selectedInventoryItem.sku,
+          name: selectedInventoryItem.name,
+          quantity: newPart.quantity,
+          unit: selectedInventoryItem.unit,
+          estimatedCost: selectedInventoryItem.unitPrice
+        }]
+      }));
+      setNewPart({ sku: '', name: '', quantity: 1, unit: 'UN', estimatedCost: 0 });
+      setSelectedInventoryItem(null);
+      setSearchTerm('');
+    } else if (newPart.name && newPart.sku) {
       setPlanData(prev => ({
         ...prev,
         parts: [...(prev.parts || []), { ...newPart, id: `PART-${Date.now()}` } as MaintenancePart]
@@ -159,12 +192,20 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
                     className="w-full px-4 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   />
                 </div>
-                <div className="grid grid-cols-2 gap-4">
+                <div className="grid grid-cols-3 gap-4">
                   <div>
                     <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Modelo do Veículo</label>
                     <select
                       value={planData.vehicleModel}
-                      onChange={(e) => setPlanData({ ...planData, vehicleModel: e.target.value })}
+                      onChange={(e) => {
+                        const selectedModel = e.target.value;
+                        const selectedVehicle = availableVehicles.find((v) => v.model === selectedModel);
+                        setPlanData({
+                          ...planData,
+                          vehicleModel: selectedModel,
+                          vehicleType: selectedVehicle?.type || '',
+                        });
+                      }}
                       className="w-full px-4 py-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl focus:ring-2 focus:ring-blue-500"
                     >
                       <option value="">Selecione...</option>
@@ -173,6 +214,16 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
                       ))}
                     </select>
                   </div>
+                  <div>
+                    <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Tipo do Veiculo</label>
+                    <input
+                      type="text"
+                      value={planData.vehicleType || ''}
+                      readOnly
+                      placeholder="Selecionado automaticamente"
+                      className="w-full px-4 py-3 bg-slate-100 dark:bg-slate-600 border border-slate-200 dark:border-slate-600 rounded-xl text-slate-500 dark:text-slate-300"
+                    />
+                  </div>
                   <div>
                     <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">Tipo de Operação</label>
                     <select
@@ -213,13 +264,22 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
                         type="number"
                         value={planData.triggers?.find(t => t.type === trigger.value)?.value || ''}
                         onChange={(e) => {
-                          const value = parseInt(e.target.value) || 0;
-                          setPlanData(prev => ({
-                            ...prev,
-                            triggers: prev.triggers?.map(t =>
-                              t.type === trigger.value ? { ...t, value } : t
-                            ) || [{ type: trigger.value as any, value }]
-                          }));
+                          const value = parseInt(e.target.value, 10) || 0;
+                          setPlanData((prev) => {
+                            const current = Array.isArray(prev.triggers) ? [...prev.triggers] : [];
+                            const index = current.findIndex((t) => t.type === trigger.value);
+
+                            if (index >= 0) {
+                              current[index] = { ...current[index], value };
+                            } else {
+                              current.push({ type: trigger.value as MaintenanceTrigger['type'], value });
+                            }
+
+                            return {
+                              ...prev,
+                              triggers: current,
+                            };
+                          });
                         }}
                         className="w-full text-2xl font-bold text-slate-900 dark:text-white bg-transparent border-none focus:ring-0 p-0"
                         placeholder="0"
@@ -241,6 +301,115 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
                   </svg>
                   Peças e Insumos Obrigatórios
                 </h2>
+
+                <div className="bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-4">
+                  <div className="grid grid-cols-2 gap-4">
+                    <div className="relative">
+                      <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">
+                        Buscar Peça / Insumo
+                      </label>
+                      <div className="relative">
+                        <input
+                          type="text"
+                          value={searchTerm}
+                          onChange={(e) => {
+                            setSearchTerm(e.target.value);
+                            if (!e.target.value) setSelectedInventoryItem(null);
+                          }}
+                          className="w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"
+                          placeholder="Buscar por nome ou SKU..."
+                        />
+                        <svg className="w-5 h-5 text-slate-400 absolute left-3 top-2.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
+                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
+                        </svg>
+                      </div>
+
+                      {/* Resultados da Busca */}
+                      {searchTerm && !selectedInventoryItem && (
+                        <div className="absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg max-h-60 overflow-y-auto">
+                          {filteredInventory.length > 0 ? (
+                            filteredInventory.map(item => (
+                              <button
+                                key={item.id}
+                                type="button"
+                                onClick={() => {
+                                  setSelectedInventoryItem(item);
+                                  setSearchTerm(item.name);
+                                  setNewPart(prev => ({ ...prev, sku: item.sku, name: item.name, unit: item.unit, estimatedCost: item.unitPrice }));
+                                }}
+                                className="w-full text-left px-4 py-2 hover:bg-slate-50 dark:hover:bg-slate-700 flex justify-between items-center group"
+                              >
+                                <div>
+                                  <p className="font-medium text-slate-900 dark:text-white">{item.name}</p>
+                                  <p className="text-xs text-slate-500">SKU: {item.sku}</p>
+                                </div>
+                                <div className="text-right">
+                                  <p className="text-sm font-medium text-slate-900 dark:text-white">
+                                    {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(item.unitPrice)}
+                                  </p>
+                                  <p className="text-xs text-slate-500">{item.quantity} {item.unit} disp.</p>
+                                </div>
+                              </button>
+                            ))
+                          ) : (
+                            <div className="p-4 text-center text-slate-500">
+                              Nenhum item encontrado
+                            </div>
+                          )}
+                        </div>
+                      )}
+                    </div>
+                    <div>
+                      <label className="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1">
+                        Quantidade
+                      </label>
+                      <div className="flex gap-2">
+                        <input
+                          type="number"
+                          min="1"
+                          value={newPart.quantity}
+                          onChange={(e) => setNewPart(prev => ({ ...prev, quantity: parseFloat(e.target.value) }))}
+                          className="flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"
+                        />
+                        <button
+                          type="button"
+                          onClick={addPart}
+                          disabled={!selectedInventoryItem && (!newPart.name || !newPart.sku)}
+                          className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"
+                        >
+                          Adicionar
+                        </button>
+                      </div>
+                    </div>
+                  </div>
+
+                  {/* Campos Manuais (Fallback) */}
+                  {!selectedInventoryItem && (
+                    <div className="grid grid-cols-3 gap-4 pt-4 border-t border-slate-200 dark:border-slate-700">
+                      <div>
+                        <label className="block text-xs text-slate-500 mb-1">SKU (Manual)</label>
+                        <input
+                          type="text"
+                          value={newPart.sku}
+                          onChange={(e) => setNewPart(prev => ({ ...prev, sku: e.target.value }))}
+                          className="w-full px-2 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"
+                          placeholder="Código..."
+                        />
+                      </div>
+                      <div className="col-span-2">
+                        <label className="block text-xs text-slate-500 mb-1">Nome (Manual)</label>
+                        <input
+                          type="text"
+                          value={newPart.name}
+                          onChange={(e) => setNewPart(prev => ({ ...prev, name: e.target.value }))}
+                          className="w-full px-2 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700"
+                          placeholder="Nome da peça..."
+                        />
+                      </div>
+                    </div>
+                  )}
+                </div>
+
                 <div className="border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden">
                   <table className="w-full">
                     <thead className="bg-slate-50 dark:bg-slate-700/50">
@@ -274,52 +443,6 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
                           </td>
                         </tr>
                       ))}
-                      <tr>
-                        <td className="px-4 py-3">
-                          <input
-                            type="text"
-                            value={newPart.name}
-                            onChange={(e) => setNewPart({ ...newPart, name: e.target.value })}
-                            placeholder="Nome da peça"
-                            className="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm"
-                          />
-                        </td>
-                        <td className="px-4 py-3">
-                          <div className="flex gap-2">
-                            <input
-                              type="number"
-                              value={newPart.quantity}
-                              onChange={(e) => setNewPart({ ...newPart, quantity: parseInt(e.target.value) || 1 })}
-                              className="w-16 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm"
-                            />
-                            <select
-                              value={newPart.unit}
-                              onChange={(e) => setNewPart({ ...newPart, unit: e.target.value })}
-                              className="px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm"
-                            >
-                              <option value="UN">UN</option>
-                              <option value="L">L</option>
-                              <option value="KG">KG</option>
-                            </select>
-                          </div>
-                        </td>
-                        <td className="px-4 py-3">
-                          <input
-                            type="number"
-                            value={newPart.estimatedCost}
-                            onChange={(e) => setNewPart({ ...newPart, estimatedCost: parseFloat(e.target.value) || 0 })}
-                            className="w-full px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm"
-                          />
-                        </td>
-                        <td className="px-4 py-3">
-                          <button
-                            onClick={addPart}
-                            className="px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700"
-                          >
-                            Adicionar
-                          </button>
-                        </td>
-                      </tr>
                     </tbody>
                   </table>
                 </div>
@@ -478,7 +601,7 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
       {/* Footer */}
       <div className="max-w-6xl mx-auto mt-8 pt-6 border-t border-slate-200 dark:border-slate-700">
         <p className="text-sm text-slate-400 text-center">
-          © 2023 Sistema de Gestão de Frota - Módulo de Planejamento de Oficina
+          © {new Date().getFullYear()} Sistema de Gestão de Frota - Módulo de Planejamento de Oficina
         </p>
       </div>
     </div>
@@ -486,3 +609,6 @@ export const MaintenancePlanWizard: React.FC<MaintenancePlanWizardProps> = ({
 };
 
 export default MaintenancePlanWizard;
+
+
+
